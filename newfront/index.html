<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ูุธุงู ูุญุงุณุจู - HNU</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="logo.png" alt="HNU logo" class="brand-logo" />
      <span class="brand-text">HNU โ ุงููุธุงู ุงููุญุงุณุจู</span>
    </div>
    <nav class="nav">
      <button id="nav-accounts" class="btn">ุฅุถุงูุฉ ุญุณุงุจ</button>
      <button id="nav-entry" class="btn">ุฅุถุงูุฉ ููุฏ</button>
      <button id="nav-ledger" class="btn">ุฏูุชุฑ ุงูุฃุณุชุงุฐ</button>
      <button id="nav-trial" class="btn">ููุฒุงู ุงููุฑุงุฌุนุฉ</button>
      <button id="nav-financial" class="btn">ูุงุฆูุฉ ุงููุฑูุฒ ุงููุงูู</button>
      <!-- Modules integration buttons -->
      <button id="nav-users" class="btn">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</button>
      <button id="nav-finyear" class="btn">ุงูุณูุฉ ุงููุงููุฉ</button>
      <button id="nav-yearclose" class="btn">ุฅููุงู ุงูุณูุฉ</button>
      <button id="nav-journal" class="btn">ุฏูุชุฑ ุงูููููุฉ</button>
      <button id="nav-reports" class="btn">ุชูุงุฑูุฑ</button>
      <button id="nav-search" class="btn">ุจุญุซ</button>
      <button id="btn-logout" class="btn" style="display:none">ุชุณุฌูู ุฎุฑูุฌ</button>
    </nav>
  </header>

  <main class="container">
    <!-- ุตูุญุฉ ุงูุญุณุงุจุงุช -->
    <section id="section-accounts" class="page">
      <h2>ุฅุถุงูุฉ ุญุณุงุจ ุฌุฏูุฏ</h2>
      <form id="form-account" class="card">
        <div class="row">
          <label>ุฑูู ุงูุญุณุงุจ<br><input name="code" type="text" required /></label>
          <label>ุงุณู ุงูุญุณุงุจ<br><input name="name" required /></label>
        </div>
        <div class="row">
          <label>ุฑุตูุฏ ุฃูู ุงููุฏุฉ<br><input name="opening_balance" type="number" step="0.01" value="0" required /></label>
          <label>ููุน ุงูุฑุตูุฏ<br>
            <select name="balance_type">
              <option value="debit">ูุฏูู</option>
              <option value="credit">ุฏุงุฆู</option>
            </select>
          </label>
        </div>
        <button type="submit" class="primary">๐พ ุญูุธ ุงูุญุณุงุจ</button>
      </form>

      <div id="accounts-list" class="card">
        <h3>ูุงุฆูุฉ ุงูุญุณุงุจุงุช</h3>
        <table id="tbl-accounts">
          <thead>
            <tr><th>ุงูุฑูู ุงูููุฏู</th><th>ุงูุงุณู</th><th>ุฑุตูุฏ ุฃูู ุงููุฏุฉ</th><th>ููุน</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- ุตูุญุฉ ุงููููุฏ -->
    <section id="section-entry" class="page" style="display:none;">
      <h2>ุฅุถุงูุฉ ููุฏ ูููู</h2>
      <form id="form-entry" class="card">
        <div class="row">
          <label>ุงูุชุงุฑูุฎ<br><input name="entry_date" type="date" required /></label>
          <label>ุงูุจูุงู<br><input name="description" /></label>
        </div>
        <div id="transactions-container">
          <div class="transaction row">
            <label>ููุน ุงูุนูููุฉ<br>
              <select class="type">
                <option value="debit">ูุฏูู</option>
                <option value="credit">ุฏุงุฆู</option>
              </select>
            </label>
            <label>ุงูุญุณุงุจ<br>
              <select class="account" required></select>
            </label>
            <label>ุงููุจูุบ<br>
              <input class="amount" type="number" step="0.01" required />
            </label>
            <button type="button" class="remove-transaction btn muted">โ</button>
          </div>
        </div>
        <button type="button" id="add-transaction" class="btn">โ ุฅุถุงูุฉ ุนูููุฉ ุฌุฏูุฏุฉ</button>
        <button type="submit" class="primary">๐พ ุญูุธ ุงูููุฏ</button>
      </form>

      <div id="entries-list" class="card">
        <h3>ุงููููุฏ</h3>
        <table id="tbl-entries">
          <thead><tr><th>ุงูุชุงุฑูุฎ</th><th>ุงูููุน</th><th>ุงูุญุณุงุจ</th><th>ุงููุจูุบ</th><th>ุงูุจูุงู</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- ุฏูุชุฑ ุงูุฃุณุชุงุฐ -->
    <section id="section-ledger" class="page" style="display:none;">
      <h2>ุฏูุชุฑ ุงูุฃุณุชุงุฐ</h2>
      <div class="card">
        <table id="tbl-ledger">
          <thead>
            <tr>
              <th>ุงูุฑูู ุงูููุฏู</th>
              <th>ุงุณู ุงูุญุณุงุจ</th>
              <th>ุฑุตูุฏ ุฃูู ุงููุฏุฉ</th>
              <th>ูุฏูู</th>
              <th>ุฏุงุฆู</th>
              <th>ุงูุฑุตูุฏ ุงูููุงุฆู</th>
              <th>ููุน</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- ููุฒุงู ุงููุฑุงุฌุนุฉ -->
    <section id="section-trial" class="page" style="display:none;">
      <h2>ููุฒุงู ุงููุฑุงุฌุนุฉ</h2>
      <div class="card">
        <table id="tbl-trial">
          <thead>
            <tr>
              <th rowspan="2">ุงูุญุณุงุจ</th>
              <th colspan="2">ุฑุตูุฏ ุฃูู ุงููุฏุฉ</th>
              <th colspan="2">ุงูุญุฑูุฉ ุฎูุงู ุงูุนุงู</th>
              <th colspan="2">ููุฒุงู ุงููุฑุงุฌุนุฉ ุจุงููุฌุงููุน</th>
              <th colspan="2">ููุฒุงู ุงููุฑุงุฌุนุฉ ุจุงูุฃุฑุตุฏุฉ</th>
            </tr>
            <tr>
              <th>ูุฏูู</th><th>ุฏุงุฆู</th>
              <th>ูุฏูู</th><th>ุฏุงุฆู</th>
              <th>ูุฏูู</th><th>ุฏุงุฆู</th>
              <th>ูุฏูู</th><th>ุฏุงุฆู</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- ูุงุฆูุฉ ุงููุฑูุฒ ุงููุงูู -->
    <section id="section-financial" class="page" style="display:none;">
      <h2>ูุงุฆูุฉ ุงููุฑูุฒ ุงููุงูู</h2>
      <div class="card">
        <div class="row">
          <label>ูู ุนุงู<br><input type="number" id="from-year" value="2025" /></label>
          <label>ุฅูู ุนุงู<br><input type="number" id="to-year" value="2025" /></label>
          <button id="generate-financial" class="primary">ุชูููุฏ ุงูุชูุฑูุฑ</button>
        </div>
        <table id="tbl-financial">
          <thead>
            <tr>
              <th>ุงูุฃุตูู ุทููู ุงูุฃุฌู</th>
              <th>ุฑูู ุงูุฅูุถุงุญ</th>
              <th>ูู ุนุงู</th>
              <th>ุฅูู ุนุงู</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู: ูุงุฆูุฉ -->
    <section id="section-users-list" class="page" style="display:none;">
      <div class="module-card">
        <h2>ูุงุฆูุฉ ุงููุณุชุฎุฏููู</h2>
        <div class="filter-row">
          <input id="users-q" placeholder="ุจุญุซ ุณุฑูุน ุจุงูุงุณู ุฃู ุงูุจุฑูุฏ" />
          <select id="users-filter-role">
            <option value="">ูู ุงูุฃุฏูุงุฑ</option>
            <option>ูุดุฑู ุฃุนูู</option>
            <option>ูุดุฑู</option>
            <option>ูุญุงุณุจ</option>
            <option>ุนุงุฑุถ</option>
          </select>
          <select id="users-filter-status">
            <option value="">ูู ุงูุญุงูุงุช</option>
            <option value="active">ูุดุท</option>
            <option value="inactive">ุบูุฑ ูุดุท</option>
          </select>
          <button id="users-btn-new" class="small-btn">โ ุฅุถุงูุฉ ูุณุชุฎุฏู</button>
        </div>
        <div class="responsive-table">
          <table id="users-tbl">
            <thead><tr><th>ุงูุงุณู</th><th>ุงูุจุฑูุฏ</th><th>ุงูุฏูุฑ</th><th>ุชุงุฑูุฎ ุงูุฅูุดุงุก</th><th>ุงูุญุงูุฉ</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ุฅุถุงูุฉ ูุณุชุฎุฏู -->
    <section id="section-add-user" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</h2>
        <form id="form-add-user">
          <div class="row">
            <label>ุงูุงุณู ุงููุงูู<br><input name="name" required></label>
            <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู<br><input name="email" type="email" required></label>
          </div>
          <div class="row">
            <label>ูููุฉ ุงููุฑูุฑ<br><input name="password" type="password" required></label>
            <label>ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ<br><input name="password2" type="password" required></label>
          </div>
          <div class="row">
            <label>ุงูุฏูุฑ<br>
              <select name="role">
                <option>ูุดุฑู</option>
                <option>ูุญุงุณุจ</option>
                <option>ุนุงุฑุถ</option>
                <option>ูุดุฑู ุฃุนูู</option>
              </select>
            </label>
          </div>
          <button class="primary">ุญูุธ ุงููุณุชุฎุฏู</button>
        </form>
      </div>
    </section>

    <!-- ุชุนุฏูู ูุณุชุฎุฏู -->
    <section id="section-edit-user" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุชุนุฏูู ุงููุณุชุฎุฏู</h2>
        <form id="form-edit-user">
          <input type="hidden" name="id" id="edit-uid">
          <div class="row">
            <label>ุงูุงุณู ุงููุงูู<br><input name="name" id="edit-name" required></label>
            <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู<br><input name="email" id="edit-email" type="email" required></label>
          </div>
          <div class="row">
            <label>ูููุฉ ุงููุฑูุฑ (ุงุฎุชูุงุฑู)<br><input name="password" type="password"></label>
            <label>ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ<br><input name="password2" type="password"></label>
          </div>
          <div class="row">
            <label>ุงูุฏูุฑ<br>
              <select name="role" id="edit-role">
                <option>ูุดุฑู</option>
                <option>ูุญุงุณุจ</option>
                <option>ุนุงุฑุถ</option>
                <option>ูุดุฑู ุฃุนูู</option>
              </select>
            </label>
          </div>
          <button class="primary">ุญูุธ ุงูุชุบููุฑุงุช</button>
        </form>
      </div>
    </section>

    <!-- ุตูุงุญูุงุช -->
    <section id="section-permissions" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุตูุงุญูุงุช ุงููุณุชุฎุฏู</h2>
        <form id="form-permissions">
          <input type="hidden" id="perm-uid" name="id">
          <div>
            <label><input type="checkbox" name="perm_add_entry"> ุฅุถุงูุฉ ููุฏ</label><br>
            <label><input type="checkbox" name="perm_post"> ุชุฑุญูู</label><br>
            <label><input type="checkbox" name="perm_reports"> ุนุฑุถ ุชูุงุฑูุฑ</label><br>
            <label><input type="checkbox" name="perm_close_year"> ุฅููุงู ุงูุณูุฉ</label>
          </div>
          <div style="margin-top:10px">
            <button class="primary">ุญูุธ ุงูุตูุงุญูุงุช</button>
          </div>
        </form>
      </div>
    </section>

    <!-- ุงูุณูุฉ ุงููุงููุฉ -->
    <section id="section-financial-year" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุฅุนุฏุงุฏ ุงูุณูุฉ ุงููุงููุฉ</h2>
        <form id="form-year">
          <label>ุงูุณูุฉ ุงููุงููุฉ (ูุซุงู: 2024/2025)<br><input name="year" id="fy-year"></label>
          <label>ุชุงุฑูุฎ ุงูุจุฏุงูุฉ<br><input name="start" id="fy-start" type="date"></label>
          <label>ุชุงุฑูุฎ ุงูููุงูุฉ<br><input name="end" id="fy-end" type="date"></label>
          <div style="margin-top:10px">
            <button class="primary" id="fy-activate">ุชูุนูู / ุชุญุฏูุซ ุงูุณูุฉ</button>
            <button id="fy-close" class="muted-btn" type="button">ุฅุบูุงู ุงูุณูุฉ</button>
          </div>
          <p id="fy-status" style="margin-top:10px"></p>
        </form>
      </div>
    </section>

    <!-- ุฅููุงู ุงูุณูุฉ -->
    <section id="section-year-close" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุฅููุงู ุงูุณูุฉ ูุชุฑุญูู ุงูุฃุฑุตุฏุฉ</h2>
        <div id="yc-summary"></div>
        <div style="margin-top:12px">
          <button id="yc-close-accounts" class="primary">ุฅููุงู ุญุณุงุจุงุช ุงูุฅูุฑุงุฏุงุช ูุงููุตุฑููุงุช</button>
          <button id="yc-rollover" class="muted-btn">ุชุฑุญูู ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู ููุณูุฉ ุงูุฌุฏูุฏุฉ</button>
        </div>
        <div id="yc-audit-log" style="margin-top:16px"></div>
      </div>
    </section>

    <!-- ุฏูุชุฑ ุงูููููุฉ -->
    <section id="section-journal" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุฏูุชุฑ ุงูููููุฉ</h2>
        <div class="filter-row">
          <label>ูู<br><input id="j-from" type="date"></label>
          <label>ุฅูู<br><input id="j-to" type="date"></label>
          <label>ููุน<br><select id="j-type"><option value="">ูู ุงูุฃููุงุน</option><option value="debit">ูุฏูู</option><option value="credit">ุฏุงุฆู</option></select></label>
          <button id="j-refresh" class="small-btn">ุชุตููุฉ</button>
        </div>
        <div class="responsive-table">
          <table id="j-tbl"><thead><tr><th>ุฑูู ุงูููุฏ</th><th>ุงูุชุงุฑูุฎ</th><th>ุงูุจูุงู</th><th>ูุฏูู</th><th>ุฏุงุฆู</th><th>ุนุฑุถ</th></tr></thead><tbody></tbody></table>
        </div>
      </div>
    </section>

    <!-- ูุตุฑููุงุช ุญุณุจ ุงููููุฉ -->
    <section id="section-expenses-faculty" class="page" style="display:none;">
      <div class="module-card">
        <h2>ูุตุฑููุงุช ุญุณุจ ุงููููุฉ</h2>
        <div class="filter-row">
          <select id="ef-faculty"></select>
          <button id="ef-view" class="small-btn">ุนุฑุถ</button>
        </div>
        <div id="ef-summary"></div>
      </div>
    </section>

    <!-- ุฅูุฑุงุฏุงุช ุงูุทูุงุจ -->
    <section id="section-student-revenue" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุฅูุฑุงุฏุงุช ุงูุทูุงุจ</h2>
        <div class="filter-row">
          <select id="sr-year"><option>2024/2025</option></select>
          <select id="sr-fac"><option value="">ูู ุงููููุงุช</option></select>
          <select id="sr-status"><option value="">ูู ุงูุญุงูุงุช</option><option value="paid">ูุฏููุน</option><option value="due">ูุณุชุญู</option></select>
          <button id="sr-refresh" class="small-btn">ุนุฑุถ</button>
        </div>
        <div id="sr-results"></div>
      </div>
    </section>

    <!-- ุชูุฑูุฑ ุญุณุงุจ -->
    <section id="section-account-report" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุชูุฑูุฑ ุญุณุงุจ ูุญุฏุฏ</h2>
        <div class="filter-row">
          <select id="ar-account"></select>
          <label>ูู<br><input id="ar-from" type="date"></label>
          <label>ุฅูู<br><input id="ar-to" type="date"></label>
          <button id="ar-view" class="small-btn">ุนุฑุถ</button>
        </div>
        <div id="ar-report"></div>
      </div>
    </section>

    <!-- ุญุฑูุฉ ุญุณุงุจ -->
    <section id="section-account-movements" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุญุฑูุฉ ุนูู ุญุณุงุจ</h2>
        <div class="filter-row">
          <select id="am-account"></select>
          <label>ูู<br><input id="am-from" type="date"></label>
          <label>ุฅูู<br><input id="am-to" type="date"></label>
          <button id="am-view" class="small-btn">ุนุฑุถ</button>
        </div>
        <div id="am-movements"></div>
      </div>
    </section>

    <!-- ุจุญุซ -->
    <section id="section-search" class="page" style="display:none;">
      <div class="module-card">
        <h2>ุจุญุซ ุนู ุญุณุงุจุงุช ููููุฏ</h2>
        <div class="filter-row">
          <input id="s-q" placeholder="ุฑูู ุงูุญุณุงุจุ ุงุณู ุงูุญุณุงุจุ ุฑูู ุงูููุฏุ ุงููุตู" />
          <select id="s-type"><option value="">ุงููู</option><option value="account">ุญุณุงุจ</option><option value="entry">ููุฏ</option></select>
          <label>ูู<br><input id="s-from" type="date"></label>
          <label>ุฅูู<br><input id="s-to" type="date"></label>
          <button id="s-search" class="small-btn">ุจุญุซ</button>
        </div>
        <div id="s-results"></div>
      </div>
    </section>
  </main>

  <script src="main.js"></script>

  <!-- redirect to standalone login page if not authenticated -->
  <script>
    try{
      if(!localStorage.getItem('loggedIn')){
        window.location.href = 'login.html';
      }
    }catch(e){/* ignore */}
  </script>
</body>
</html>
